{% comment %}
  handles collections, search, and all products
  Context-aware with dynamic filtering and search capabilities
{% endcomment %}



{% liquid

  assign show_search = true
  # Context detection and data source assignment
  if template.name == 'search'
    assign is_search_page = true
    assign products = search.results
    assign products_count = search.results_count
    assign page_title = 'Search Results'
    assign container_id = 'search-results'
  elsif collection.handle == 'all'
    assign is_all_products = true
  else
    assign is_collection_page = true
    assign products = collection.products
    assign products_count = collection.products_count
    assign page_title = collection.title
    assign container_id = 'collection-with-filters'
  endif
%}

<div class="collection-container bg-white pt-40" id="{{ container_id }}" data-section-id="{{ section.id }}" data-collection-handle="{{ collection.handle | default: 'search' }}">
  
  <!-- Search Bar (Conditional) -->
  {% if show_search %}
    <div class="search-bar-container bg-gray-50 border-b border-gray-200 py-4">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <form role="search" method="get" action="{{ routes.search_url }}" class="relative">
          <input
            type="search"
            name="q"
            id="search-input"
            value="{{ search.terms | escape }}"
            placeholder="{% if is_search_page %}Search products, articles, and pages...{% elsif is_all_products %}Search all products...{% else %}Search in {{ collection.title | default: 'products' }}...{% endif %}"
            aria-label="Search products"
            class="w-full py-3 px-4 pl-12 pr-4 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm"
          >
          <input type="hidden" name="type" value="product">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
          </div>
          <button type="submit" class="absolute inset-y-0 right-0 pr-3 flex items-center">
            <span class="sr-only">Search</span>
            <svg class="h-5 w-5 text-gray-400 hover:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5-5 5M6 12h12"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  {% endif %}

  <!-- Main Content Area -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    
    <!-- Mobile Filter Button -->
    {% if section.settings.enable_filtering and is_collection_page %}
      <div class="bg-white lg:hidden mb-6">
        <button 
          type="button" 
          id="mobile-filter-toggle"
          class="w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"
        >
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"></path>
          </svg>
          Filters & Sort
        </button>
      </div>
    {% endif %}

    <!-- Two Column Layout -->
    <div class="grid grid-cols-1 {% if section.settings.enable_filtering and is_collection_page %}lg:grid-cols-12{% endif %} gap-8">
      
      <!-- Sidebar Filters (Collection pages only) -->
      {% if section.settings.enable_filtering and is_collection_page %}
        <aside 
          class="lg:col-span-4 xl:col-span-3 sticky top-30 bg-white z-20" 
          id="sidebar-filters"
          style="display: none; height: fit-content;"
        >
          <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
            
            <!-- Filter Form -->
            <form id="FacetFiltersForm" class="space-y-6">
              
              <!-- Sort Options -->
              <div class="border-b border-gray-200 pb-6">
                <div class="flex items-center justify-between cursor-pointer py-2 hover:bg-gray-50 px-2 rounded mb-4" data-collapse-toggle="sort-filter">
                  <h3 class="text-sm font-medium text-gray-900">Sort By</h3>
                  <svg class="w-4 h-4 text-gray-500 transform transition-transform duration-200 collapse-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
                </div>
                <div class="collapse-content" id="sort-filter">
                <select 
                  name="sort_by" 
                  id="sort-by" 
                  class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
                >
                  <option value="manual">Featured</option>
                  <option value="best-selling">Best Selling</option>
                  <option value="title-ascending">A-Z</option>
                  <option value="title-descending">Z-A</option>
                  <option value="price-ascending">Price: Low to High</option>
                  <option value="price-descending">Price: High to Low</option>
                  <option value="created-descending">Newest</option>
                  <option value="created-ascending">Oldest</option>
                </select>
                </div>
              </div>

              <!-- Dynamic Filters (Native Shopify) -->
              {% if collection.filters.size > 0 %}
                {% for filter in collection.filters %}
                  <div class="border-b border-gray-200 pb-6">
                    <div class="flex items-center justify-between cursor-pointer py-2 hover:bg-gray-50 px-2 rounded mb-4" data-collapse-toggle="filter-{{ forloop.index }}">
                      <h3 class="text-sm font-medium text-gray-900">{{ filter.label }}</h3>
                      <svg class="w-4 h-4 text-gray-500 transform transition-transform duration-200 collapse-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                    </div>
                    <div class="collapse-content hidden" id="filter-{{ forloop.index }}">
                    
                    {% case filter.type %}
                      {% when 'list' %}
                        <div class="space-y-2 max-h-32 overflow-y-auto">
                          {% for filter_value in filter.values %}
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded text-xs">
                              <input
                                type="checkbox"
                                name="{{ filter_value.param_name }}"
                                value="{{ filter_value.value }}"
                                {% if filter_value.active %}checked{% endif %}
                                class="rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 w-3 h-3"
                              >
                              <span class="ml-2 text-gray-700 flex-1">
                                {{ filter_value.label }}
                                <span class="text-gray-500">({{ filter_value.count }})</span>
                              </span>
                            </label>
                          {% endfor %}
                        </div>
                        
                      {% when 'price_range' %}
                        <div class="space-y-3">
                          <div>
                            <label for="price-min" class="block text-xs font-medium text-gray-700">Min (£)</label>
                            <input
                              type="number"
                              id="price-min"
                              name="{{ filter.min_value.param_name }}"
                              value="{{ filter.min_value.value }}"
                              min="0"
                              step="0.01"
                              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-xs"
                            >
                          </div>
                          <div>
                            <label for="price-max" class="block text-xs font-medium text-gray-700">Max (£)</label>
                            <input
                              type="number"
                              id="price-max"
                              name="{{ filter.max_value.param_name }}"
                              value="{{ filter.max_value.value }}"
                              min="0"
                              step="0.01"
                              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-xs"
                            >
                          </div>
                        </div>
                    {% endcase %}
                    </div>
                  </div>
                {% endfor %}
              {% endif %}

              <!-- Clear Filters -->
              {% if collection.filters.size > 0 %}
                <div class="pt-2">
                  <a 
                    href="{{ collection.url }}" 
                    class="w-full flex justify-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-xs font-medium text-gray-700 bg-white hover:bg-gray-50"
                  >
                    Clear All Filters
                  </a>
                </div>
              {% endif %}
              
            </form>
          </div>
        </aside>
      {% endif %}

      <!-- Product Grid -->
      <main class="{% if section.settings.enable_filtering and is_collection_page %}lg:col-span-8 xl:col-span-9{% endif %}">
        
        <!-- Results Header -->
        <div class="flex items-center justify-between mb-6">
          <div>
            <h1 class="text-2xl font-bold text-gray-900">{{ page_title }}</h1>
            {% if is_collection_page and collection.description != blank %}
              <p class="mt-2 text-gray-600">{{ collection.description }}</p>
            {% endif %}
            <p class="mt-2 text-sm text-gray-500" aria-live="polite">
              {% if products_count == 0 %}
                No products found
              {% elsif products_count == 1 %}
                1 product
              {% else %}
                {{ products_count }} products
              {% endif %}
            </p>
          </div>
          
          <!-- Desktop Sort (visible on larger screens) -->
          <div class="hidden lg:block">
            <select 
              name="sort_by" 
              id="sort-by-desktop" 
              class="rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
            >
              <option value="manual">Featured</option>
              <option value="best-selling">Best Selling</option>
              <option value="title-ascending">A-Z</option>
              <option value="title-descending">Z-A</option>
              <option value="price-ascending">Price: Low to High</option>
              <option value="price-descending">Price: High to Low</option>
              <option value="created-descending">Newest</option>
              <option value="created-ascending">Oldest</option>
            </select>
          </div>
        </div>

        <!-- Product Grid -->
        {% paginate collection.products by section.settings.products_per_page %}
          <div 
            class="product-grid grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6 mb-8"
            id="product-grid"
            data-product-grid
          >
            {% for product in products %}
              <div class="product-card group" 
                data-product-title="{{ product.title | escape | downcase }}"
                data-product-price="{{ product.price | money_without_currency | remove: ',' | strip }}"
                data-product-vendor="{{ product.vendor | escape | downcase }}"
                data-product-type="{{ product.type | escape | downcase }}"
                data-product-tags="{{ product.tags | join: ',' | downcase }}"
                data-product-collections="{% for collection in product.collections %}{{ collection.handle | downcase }}{% unless forloop.last %},{% endunless %}{% endfor %}">
                <a href="{{ product.url }}" class="block">
                  <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden">
                    {% if product.featured_image %}
                      {% render 'image',
                        class: 'w-full h-full object-cover group-hover:scale-105 transition-transform',
                        image: product.featured_image,
                        width: 400,
                        height: 400
                      %}
                    {% else %}
                      <div class="w-full h-full flex items-center justify-center bg-gray-200">
                        <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                      </div>
                    {% endif %}
                  </div>
                  
                  <div class="mt-4">
                    <h3 class="text-sm md:text-2xl font-medium text-gray-900 transition-colors">
                      {{ product.title | escape }}
                    </h3>
                    <p class="mt-1 text-sm text-gray-500">
                      {{ product.price | money }}
                      {% if product.compare_at_price > product.price %}
                        <span class="line-through text-gray-400 ml-2">
                          {{ product.compare_at_price | money }}
                        </span>
                      {% endif %}
                    </p>
                  </div>
                </a>
              </div>
            {% endfor %}
          </div>

          <!-- Pagination -->
          {% if paginate.pages > 1 %}
            <nav class="pagination flex items-center justify-center gap-3 mt-12" aria-label="Pagination">
              {% if paginate.previous %}
                <a href="{{ paginate.previous.url }}" class="pagination-arrow opacity-70 hover:opacity-100 transition-opacity px-3 py-2 text-gray-700" aria-label="Previous page">
                  ← Prev
                </a>
              {% else %}
                <span class="pagination-arrow opacity-30 px-3 py-2 text-gray-400 cursor-not-allowed">
                  ← Prev
                </span>
              {% endif %}
              
              {% for part in paginate.parts %}
                {% if part.is_link %}
                  <a href="{{ part.url }}" class="pagination-number opacity-70 hover:opacity-100 transition-opacity px-4 py-2 text-gray-700 rounded hover:bg-gray-100">
                    {{ part.title }}
                  </a>
                {% elsif part.title == paginate.current_page %}
                  <span class="pagination-number pagination-current opacity-100 px-4 py-2 bg-gray-900 text-white rounded font-medium">
                    {{ part.title }}
                  </span>
                {% else %}
                  <span class="pagination-ellipsis opacity-50 px-2 text-gray-400">
                    {{ part.title }}
                  </span>
                {% endif %}
              {% endfor %}
              
              {% if paginate.next %}
                <a href="{{ paginate.next.url }}" class="pagination-arrow opacity-70 hover:opacity-100 transition-opacity px-3 py-2 text-gray-700" aria-label="Next page">
                  Next →
                </a>
              {% else %}
                <span class="pagination-arrow opacity-30 px-3 py-2 text-gray-400 cursor-not-allowed">
                  Next →
                </span>
              {% endif %}
            </nav>
          {% endif %}

        {% endpaginate %}
        
      </main>
    </div>
  </div>
</div>

<style>
  /* Show sidebar on desktop for collection pages with filtering enabled */
  @media (min-width: 1024px) {
    #sidebar-filters {
      display: block !important;
    }
  }
  
  /* Mobile filter toggle */
  @media (max-width: 1023px) {
    #sidebar-filters.mobile-open {
      display: block !important;
    }
  }

  /* Collapsed state */
  .collapse-content.hidden {
    display: none;
  }
  
  /* Arrow rotation when collapsed */
  .collapsed .collapse-arrow {
    transform: rotate(-90deg);
  }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Collapse functionality
  document.querySelectorAll('[data-collapse-toggle]').forEach(toggle => {
    toggle.addEventListener('click', function() {
      const targetId = this.getAttribute('data-collapse-toggle');
      const target = document.getElementById(targetId);
      const arrow = this.querySelector('.collapse-arrow');
      
      if (target.classList.contains('hidden')) {
        target.classList.remove('hidden');
        this.classList.remove('collapsed');
        arrow.style.transform = 'rotate(0deg)';
      } else {
        target.classList.add('hidden');
        this.classList.add('collapsed');
        arrow.style.transform = 'rotate(-90deg)';
      }
    });
  });

  // Initialize - Sort open by default, filters closed
  const sortFilter = document.getElementById('sort-filter');
  if (sortFilter) {
    sortFilter.classList.remove('hidden');
    const sortToggle = document.querySelector('[data-collapse-toggle="sort-filter"]');
    if (sortToggle) {
      const sortArrow = sortToggle.querySelector('.collapse-arrow');
      if (sortArrow) {
        sortArrow.style.transform = 'rotate(0deg)';
      }
    }
  }

  // Mobile filter toggle
  const mobileToggle = document.getElementById('mobile-filter-toggle');
  const sidebar = document.getElementById('sidebar-filters');
  
  if (mobileToggle && sidebar) {
    mobileToggle.addEventListener('click', function() {
      sidebar.classList.toggle('mobile-open');
      
      // Update button text
      const isOpen = sidebar.classList.contains('mobile-open');
      this.querySelector('span') ? this.querySelector('span').textContent = isOpen ? 'Hide Filters' : 'Show Filters' : null;
    });
  }
  
  // Search input functionality
  const searchInput = document.getElementById('search-input');

  if (searchInput) {
    function applyAllFilters() {
      const searchTerm = searchInput.value.trim().toLowerCase();
      const activeFilters = {
        search: searchTerm,
        categories: [],
        vendors: [],
        tags: [],
        productTypes: [],
        priceMin: 0,
        priceMax: Infinity,
        sortBy: 'manual'
      };
      
      // Get active filter checkboxes
      document.querySelectorAll('#FacetFiltersForm input[type="checkbox"]:checked').forEach(checkbox => {
        const name = checkbox.name;
        const value = checkbox.value.toLowerCase();
        
        // Handle various Shopify filter parameter patterns
        if (name.includes('filter.v.option') || name.includes('filter.p.')) {
          // Check for vendor filters
          if (name.includes('vendor') || name.includes('brand')) {
            activeFilters.vendors.push(value);
          }
          // Check for product type filters  
          else if (name.includes('product_type') || name.includes('type')) {
            activeFilters.productTypes.push(value);
          }
          // Check for tag filters
          else if (name.includes('tag')) {
            activeFilters.tags.push(value);
          }
          // Check for collection filters
          else if (name.includes('collection') || name.includes('category')) {
            activeFilters.categories.push(value);
          }
          // Generic filter - try to determine type from checkbox label or value
          else {
            const label = checkbox.closest('label');
            const labelText = label ? label.textContent.toLowerCase() : '';
            
            // Smart detection based on context
            if (labelText.includes('collection') || labelText.includes('category')) {
              activeFilters.categories.push(value);
            } else {
              // Default to categories for unknown filters
              activeFilters.categories.push(value);
            }
          }
        }
      });
      
      // Get price range
      const priceMinInput = document.getElementById('price-min');
      const priceMaxInput = document.getElementById('price-max');
      if (priceMinInput && priceMinInput.value) {
        activeFilters.priceMin = parseFloat(priceMinInput.value) || 0;
      }
      if (priceMaxInput && priceMaxInput.value) {
        activeFilters.priceMax = parseFloat(priceMaxInput.value) || Infinity;
      }
      
      // Get sort option
      const sortSelect = document.getElementById('sort-by') || document.getElementById('sort-by-desktop');
      if (sortSelect) {
        activeFilters.sortBy = sortSelect.value;
      }
      
      // Get all product cards and their data
      const allProducts = Array.from(document.querySelectorAll('.product-card')).map(card => {
        // Get data from data attributes
        return {
          element: card,
          title: card.dataset.productTitle || '',
          price: parseFloat(card.dataset.productPrice) || 0,
          vendor: card.dataset.productVendor || '',
          productType: card.dataset.productType || '',
          tags: (card.dataset.productTags || '').split(',').filter(tag => tag.trim()),
          collections: (card.dataset.productCollections || '').split(',').filter(col => col.trim())
        };
      });
      
      // Filter products
      const filteredProducts = allProducts.filter(product => {
        // Search filter
        if (activeFilters.search && !product.title.includes(activeFilters.search)) {
          return false;
        }
        
        // Price filter
        if (product.price < activeFilters.priceMin || product.price > activeFilters.priceMax) {
          return false;
        }
        
        // Vendor filter
        if (activeFilters.vendors.length > 0 && !activeFilters.vendors.includes(product.vendor)) {
          return false;
        }
        
        // Product type filter
        if (activeFilters.productTypes.length > 0 && !activeFilters.productTypes.includes(product.productType)) {
          return false;
        }
        
        // Tags filter
        if (activeFilters.tags.length > 0) {
          const hasMatchingTag = activeFilters.tags.some(filterTag => 
            product.tags.some(productTag => productTag.includes(filterTag))
          );
          if (!hasMatchingTag) {
            return false;
          }
        }
        
        // Collections filter
        if (activeFilters.categories.length > 0) {
          const hasMatchingCollection = activeFilters.categories.some(filterCat => 
            product.collections.some(productCol => productCol.includes(filterCat))
          );
          if (!hasMatchingCollection) {
            return false;
          }
        }
        
        return true;
      });
      
      // Sort products
      filteredProducts.sort((a, b) => {
        switch (activeFilters.sortBy) {
          case 'price-ascending':
            return a.price - b.price;
          case 'price-descending':
            return b.price - a.price;
          case 'title-ascending':
            return a.title.localeCompare(b.title);
          case 'title-descending':
            return b.title.localeCompare(a.title);
          default:
            return 0; // Keep original order for 'manual', 'best-selling', etc.
        }
      });
      
      // Hide all products first
      allProducts.forEach(product => {
        product.element.style.display = 'none';
      });
      
      // Show filtered products
      filteredProducts.forEach(product => {
        product.element.style.display = 'block';
      });
      
      // Update product count
      const countElement = document.querySelector('[aria-live="polite"]');
      if (countElement) {
        const count = filteredProducts.length;
        const countText = count === 0 ? 'No products found' : 
                        count === 1 ? '1 product' : 
                        `${count} products`;
        countElement.textContent = countText;
      }
    }
  
    // Attach event listeners
    searchInput.addEventListener('input', function(){ applyAllFilters(); updateFilterAvailability(); });
    
    // Filter form changes
    const filterForm = document.getElementById('FacetFiltersForm');
    if (filterForm) {
      filterForm.addEventListener('change', function(){ applyAllFilters(); updateFilterAvailability(); });
    }
    
    // Sort changes
    const sortSelects = document.querySelectorAll('#sort-by, #sort-by-desktop');
    sortSelects.forEach(select => {
      select.addEventListener('change', function(){ applyAllFilters(); updateFilterAvailability(); });
    });
    
    // Update filter availability (grey out unavailable options)
    function updateFilterAvailability() {
      const allProducts = Array.from(document.querySelectorAll(".product-card")).map(card => ({
        element: card,
        vendor: card.dataset.productVendor || "",
        productType: card.dataset.productType || "",
        tags: (card.dataset.productTags || "").split(",").filter(tag => tag.trim()),
        collections: (card.dataset.productCollections || "").split(",").filter(col => col.trim())
      }));
      
      const visibleProducts = allProducts.filter(product => 
        product.element.style.display !== "none"
      );
      
      const availableValues = {
        vendors: new Set(),
        productTypes: new Set(),
        tags: new Set(),
        collections: new Set()
      };
      
      visibleProducts.forEach(product => {
        if (product.vendor) availableValues.vendors.add(product.vendor.toLowerCase());
        if (product.productType) availableValues.productTypes.add(product.productType.toLowerCase());
        product.tags.forEach(tag => availableValues.tags.add(tag.toLowerCase()));
        product.collections.forEach(col => availableValues.collections.add(col.toLowerCase()));
      });
      
      document.querySelectorAll("#FacetFiltersForm input[type=checkbox]").forEach(checkbox => {
        const value = checkbox.value.toLowerCase();
        const name = checkbox.name;
        const label = checkbox.closest("label");
        
        let isAvailable = false;
        
        if (name.includes("vendor") || name.includes("brand")) {
          isAvailable = availableValues.vendors.has(value);
        } else if (name.includes("product_type") || name.includes("type")) {
          isAvailable = availableValues.productTypes.has(value);
        } else if (name.includes("tag")) {
          isAvailable = availableValues.tags.has(value);
        } else if (name.includes("collection") || name.includes("category")) {
          isAvailable = availableValues.collections.has(value);
        } else {
          isAvailable = availableValues.vendors.has(value) || 
                      availableValues.productTypes.has(value) ||
                      availableValues.tags.has(value) ||
                      availableValues.collections.has(value);
        }
        
        if (label) {
          if (isAvailable || checkbox.checked) {
            label.classList.remove("opacity-50", "cursor-not-allowed");
            label.classList.add("cursor-pointer");
            checkbox.disabled = false;
          } else {
            label.classList.add("opacity-50", "cursor-not-allowed");
            label.classList.remove("cursor-pointer");
            checkbox.disabled = true;
          }
        }
      });
    }

    // Initial filter application
    applyAllFilters(); updateFilterAvailability();
  }
});
</script>

{% schema %}
{
  "name": "Collection",
  "class": "section",
  "settings": [
    {
      "type": "range",
      "id": "products_per_page",
      "min": 8,
      "max": 48,
      "step": 4,
      "default": 24,
      "label": "Products per page"
    },
    {
      "type": "checkbox",
      "id": "enable_filtering",
      "default": true,
      "label": "Enable filtering",
      "info": "Show filters for collections (uses native Shopify filtering)"
    },
    {
      "type": "checkbox",
      "id": "enable_sorting",
      "default": true,
      "label": "Enable sorting"
    },
    {
      "type": "checkbox",
      "id": "enable_search",
      "default": true,
      "label": "Enable search bar",
      "info": "Show search bar on collection pages (automatically enabled for All Products)"
    },
    {
      "type": "checkbox",
      "id": "show_collection_description",
      "default": true,
      "label": "Show collection description"
    }
  ]
}
{% endschema %}
