{% comment %}
  Gemstone Grid Section - Collection Links Only
{% endcomment %}

{% assign gemstones = shop.metaobjects.gemstone.values %}

<div class="py-12 lg:py-16 bg-white relative">
  <div class="max-w-7xl mx-auto px-4">

    {% if section.settings.heading != blank %}
      <h2 class="text-4xl lg:text-5xl font-bold italic text-center mb-12">{{ section.settings.heading }}</h2>
    {% endif %}

    {% if gemstones.size > 0 %}
      <!-- Gemstone Collection Links -->
      <div class="flex flex-wrap justify-center gap-4 mb-12 overflow-visible pb-4">
        {% for gemstone in gemstones %}
          {% assign primary_color = gemstone.primary_color | downcase %}
          {% assign attached_collection = gemstone.collection.value %}
          
          {% if attached_collection %}
            {% assign collection_handle = attached_collection.handle %}
            <a href="/collections/{{ collection_handle }}"
              class="gemstone-btn px-6 py-3 text-gray-800 border-2 border-transparent transition-all duration-200 text-xl whitespace-nowrap cursor-pointer hover:scale-105"
              style="--color: {{ primary_color }}"
            >
              {{ gemstone.display_name.value }}
            </a>
          {% else %}
            <!-- Fallback if no collection is attached -->
            <span class="px-6 py-3 text-gray-400 border-2 border-gray-300 text-xl whitespace-nowrap">
              {{ gemstone.display_name.value }}
            </span>
          {% endif %}
        {% endfor %}
      </div>

    {% else %}
      <p class="text-center text-red-600 font-semibold">⚠️ No gemstone metaobjects found.</p>
    {% endif %}

  </div>
</div>

<style>
  .gemstone-btn {
    border-color: var(--color);
    transition: all 0.3s ease;
  }
  
  .gemstone-btn:hover {
    background-color: var(--color);
    color: white;
    border-color: var(--color);
    transform: scale(1.05);
  }
</style>

{% schema %}
{
  "name": "Gemstone Grid",
  "tag": "section",
  "class": "gemstone-grid",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Explore Our Gemstones"
    }
  ],
  "presets": [
    {
      "name": "Gemstone Grid"
    }
  ]
}
{% endschema %}