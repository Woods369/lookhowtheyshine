<div class="testimonials" data-speed="{{ section.settings.parallax_speed | default: 0.8 }}">
  <div class="page-width">
    {% if section.settings.heading != blank %}
      <h2 class="text-3xl lg:text-4xl font-bold text-center mb-12">{{ section.settings.heading }}</h2>
    {% endif %}
    
    {% if section.blocks.size > 0 %}
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        {% for block in section.blocks %}
          {% case block.type %}
            {% when "testimonial" %}
              <div class="testimonial-card bg-white p-6 rounded-lg shadow" {{ block.shopify_attributes }}>
                {% if block.settings.rating > 0 %}
                  <div class="stars mb-4">
                    {% for i in (1..5) %}
                      {% if i <= block.settings.rating %}★{% else %}☆{% endif %}
                    {% endfor %}
                  </div>
                {% endif %}
                {% if block.settings.quote %}
                  <blockquote class="mb-4 italic">{{ block.settings.quote }}</blockquote>
                {% endif %}
                {% if block.settings.author %}
                  <cite class="font-semibold">{{ block.settings.author }}</cite>
                {% endif %}
              </div>
          {% endcase %}
        {% endfor %}
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Testimonials",
  "settings": [
    {
      "type": "text",
      "id": "heading", 
      "label": "Heading",
      "default": "What Our Customers Say"
    },
    {
      "type": "range",
      "id": "parallax_speed",
      "min": 0.1,
      "max": 2.0,
      "step": 0.1,
      "default": 0.8,
      "label": "Parallax speed"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "richtext",
          "id": "quote",
          "label": "Quote"
        },
        {
          "type": "text",
          "id": "author",
          "label": "Author"
        },
        {
          "type": "range",
          "id": "rating",
          "min": 1,
          "max": 5,
          "default": 5,
          "label": "Rating"
        }
      ]
    }
  ],
  "presets": [{"name": "Testimonials"}]
}
{% endschema %}
